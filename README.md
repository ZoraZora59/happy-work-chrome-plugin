# 打工人加油站 Chrome 插件

一款专为打工人设计的Chrome浏览器插件，实时显示工作收入，提供工作动力和成就感。

## ✨ 核心功能

收入构成的解释：

1. 今日工资：根据月薪和当月出勤天数算出来的平均日工资，但如果今天是加班日或者节假日，会将平均日工资乘以加班系数来得到今日工资。这个收入是没有算上工作日下班后加班费的。
2. 实时收入：这个收入是从今天的上班时间开始到当前的实时收入，但是会剔除掉休息时间的部分不计算收入。工作日下班后加班的话，加班费会自动加入到实时收入中，但是不会计算到"今日工资"里。
3. 时薪：今日工资除以单日工作小时数。如果工作日下班后加班的话，这个时薪会随时更新。
4. 特别注意：工作日下班后加班的情况，需要在界面里点击【😭我在加班】才会统计加班费

### 🚀 实时收入显示
- **平滑连续增长**：收入数字每秒钟平滑增长，营造"实时赚钱"的愉悦感
- **精确计算**：基于工作时间、薪资、休息时间进行秒级精度计算
- **状态持久化**：关闭重开窗口时保持收入连续性，不从零开始
- **动态心情系统**：根据工作进度调整界面氛围，6个心情阶段带来不同体验

### 💰 灵活的薪资配置
- **基础设置**：月薪、年终奖、收入币种、显示币种
- **复杂加班场景**：
  - 节假日加班（可设置薪资倍数，精确到小数点后两位）
  - 普通休息日加班（支持每周/多周频率，基准周设置）
  - 工作日下班后加班（独立薪资倍数，点击"😭我在加班"按钮激活）
- **智能工作日管理**：普通休息日加班时自动置灰非工作日选项

### ⏰ 精准时间管理
- **灵活工作时间**：自定义上下班时间
- **多段休息时间**：支持添加多个休息时段（午休、茶歇等）
- **智能日期识别**：自动识别节假日、工作日、休息日类型
- **下班倒计时**：精确到秒的下班倒计时

### 🎯 价值衡量系统
- **预设选项**：可乐（¥3）、辣翅（¥14）、巨无霸（¥28）
- **自定义物品**：支持自定义物品名称和价格
- **实时换算**：显示"约等于X个XX"，增强收入概念

### 🎮 高级视觉特效系统

#### 💸 智能金钱特效
- **智能触发**：根据收入增长金额自动调整弹出概率
- **动态样式**：不同金额对应不同的特效大小和颜色
- **性能优化**：限制同时显示数量，独立于收入更新频率
- **心情联动**：根据工作进度调整特效频率和强度

#### 🌈 渐进式进度条系统
- **上班初期(0-20%)**：单色进度条，轻微阴影效果
- **专注工作(20-40%)**：单色带光效，4秒呼吸式动画
- **稳定推进(40-60%)**：双色渐变，青绿到草绿过渡
- **即将胜利(60-80%)**：四色渐变，冷色调到暖色调
- **下班冲刺(80-95%)**：完整彩虹色谱，3秒滚动动画
- **终极爆发(95-100%)**：6色超彩虹渐变，1秒极速滚动

#### ✨ 数字动画效果
- **发光效果**：收入数字带有动态发光边框
- **跳动动画**：数字增长时的弹跳效果
- **颜色变化**：根据心情阶段调整数字颜色
- **平滑过渡**：所有动画的流畅衔接

### 🎭 动态心情系统
- **上班初期**：心情平静，特效概率0.3倍，间隔2倍
- **专注工作**：进入状态，特效概率0.5倍，间隔1.5倍  
- **稳定推进**：工作节奏稳定，特效概率0.7倍，间隔1.2倍
- **即将胜利**：距离下班不远，特效概率1.2倍，间隔0.8倍
- **下班冲刺**：马上下班，特效概率2.0倍，间隔0.5倍
- **终极爆发**：最后几分钟，特效概率5.0倍，间隔0.2倍

## 🛠️ 技术特性

### 📊 智能算法
- **月度工作日计算**：准确计算每月实际工作天数，考虑加班倍数
- **秒级精度收入**：基于实际工作秒数计算收入，确保准确性
- **平滑增长算法**：基于时间差的连续增长，避免数字跳跃
- **状态同步**：Chrome存储同步，多设备数据一致

### 🎨 用户体验
- **零配置启动**：合理的默认设置，开箱即用
- **实时预览**：设置修改立即生效，无需重启
- **错误处理**：完善的输入验证和用户友好的错误提示
- **性能优化**：高频更新但低资源消耗，平衡流畅度和性能

### 🔧 扩展架构
- **模块化设计**：清晰的代码结构，易于维护和扩展
- **事件驱动**：响应式编程，高效处理用户交互
- **数据持久化**：利用Chrome存储API确保数据安全
- **跨页面通信**：设置页面与主界面数据实时同步

## 📱 界面展示

### 主界面
- 实时收入显示（大号数字，平滑增长，发光特效）
- 动态进度条（渐进式彩虹效果，根据进度变化）
- 价值换算描述
- 今日预期收入
- 下班倒计时
- 智能金钱特效动画
- 心情状态联动效果

### 设置页面
- 收入设置（月薪、奖金、币种）
- 工作时间配置（工作日、工作时间、休息时间）
- 加班场景设置（三种加班类型，各自薪资倍数）
- 价值衡量配置（预设或自定义物品）
- 实时预览效果

## 🚀 安装使用

### 开发环境安装
1. 克隆仓库：
   ```bash
   git clone https://github.com/zorazora59/happy-work-chrome-plugin.git
   cd happy-work-chrome-plugin
   ```

2. 安装依赖：
   ```bash
   npm install
   ```

3. 开发调试：
   - 打开Chrome浏览器
   - 访问 `chrome://extensions/`
   - 开启"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择项目根目录

### 生产环境部署
1. 打包构建：
   ```bash
   npm run build
   ```

2. 发布：
   - 将`dist`目录打包为`.zip`文件
   - 上传至Chrome Web Store

## 📁 项目结构

```
happy-work-chrome-plugin/
├── src/                    # 源码目录
│   ├── popup/              # 主界面
│   │   ├── index.html      # 主界面HTML
│   │   ├── popup.css       # 样式文件（898行，含特效）
│   │   ├── popup.js        # 主要逻辑（974行，核心算法）
│   │   ├── settings.html   # 设置页面（164行）
│   │   ├── settings.css    # 设置页面样式（301行）
│   │   └── settings.js     # 设置页面逻辑（323行）
│   ├── background/         # 后台脚本
│   ├── content/            # 内容脚本
│   └── assets/             # 静态资源
├── public/                 # 公共资源
├── manifest.json           # Chrome插件配置文件
├── package.json            # 项目依赖配置
├── DEVELOPMENT_SUMMARY.md  # 开发工作总结
├── .gitignore             # Git忽略文件
└── README.md              # 项目文档
```

## ⚙️ 配置说明

### 基础配置
- **月薪**：税前月薪金额
- **年终奖**：可选，用于月平均收入计算
- **币种**：支持人民币(¥)、美元($)、欧元(€)

### 工作时间配置
- **工作日**：可选择任意工作日组合
- **工作时间**：自定义上下班时间
- **休息时间**：支持多个休息时段

### 加班配置
- **节假日加班**：法定节假日的加班薪资倍数（精确到小数点后两位）
- **休息日加班**：周末等休息日加班，支持频率设置（1-4周循环）
- **工作日加班**：正常工作日下班后加班倍数

### 高级特效配置
- **金钱特效**：根据收入增长自动调整显示频率
- **进度条效果**：6种渐进式视觉效果，自动切换
- **心情系统**：根据工作进度自动调整界面氛围

## 🎯 使用技巧

### 最佳实践
1. **首次使用**：先完成基础薪资和工作时间设置
2. **加班设置**：根据公司政策配置加班薪资倍数
3. **价值衡量**：选择贴近生活的参照物，增强收入感知
4. **定期更新**：薪资调整后及时更新配置

### 进阶功能
- 利用休息日加班频率设置，适应轮班或特殊排班
- 通过自定义价值衡量物品，设置个人目标（如"存钱买XX"）
- 观察金钱特效的触发规律，了解收入增长节奏
- 体验不同时段的心情变化和视觉效果

### 特效系统说明
- **金钱特效触发逻辑**：
  - ¥0.5+：20%概率触发
  - ¥0.1+：10%概率触发  
  - ¥0.05+：5%概率触发
  - 其他：1%概率触发
- **心情系统影响**：工作进度越高，特效越频繁，视觉效果越丰富

## 🔄 更新日志

### v3.0.0 (当前版本) - 2024年最新
- ✨ **动态心情系统**：6个心情阶段，智能调整界面氛围
- 🌈 **渐进式进度条**：6种不同的进度条视觉效果
- 💸 **高级金钱特效**：智能概率调整，心情联动
- 🎭 **视觉效果升级**：发光数字、呼吸动画、彩虹滚动
- ⚡ **性能优化**：特效系统独立运行，不影响核心功能
- 🔧 **代码重构**：模块化设计，提升维护性

### v2.0.0
- ✨ 全新的平滑收入增长算法
- 🎮 智能金钱特效系统
- ⚙️ 复杂加班场景支持
- 💾 收入状态持久化
- 🎨 现代化UI设计
- ⚡ 性能优化和错误处理

### v1.0.0
- 🎉 基础收入显示功能
- ⏰ 工作时间管理
- 🎯 价值衡量系统
- ⚙️ 设置页面

## 🏆 技术亮点

### 核心算法
- **平滑增长算法**：基于时间差的收入连续增长
- **智能特效系统**：根据金额大小自动调整概率
- **复杂工时计算**：多种加班场景的统一处理
- **状态持久化**：Chrome存储的智能管理

### 性能优化
- **高频更新**：100ms间隔，平衡流畅度和性能
- **存储控制**：5秒间隔保存，避免过度写入
- **内存管理**：及时清理动画元素，防止泄漏
- **特效优化**：独立渲染线程，不阻塞主逻辑

### 用户体验
- **即时反馈**：所有操作都有即时的视觉反馈
- **渐进披露**：复杂设置通过展开/收起组织
- **智能默认**：零配置启动，开箱即用
- **错误预防**：完善的输入验证和智能提示

## 🤝 贡献指南

欢迎提交Issue和Pull Request！

### 开发贡献
1. Fork本仓库
2. 创建特性分支：`git checkout -b feature/amazing-feature`
3. 提交更改：`git commit -m 'Add amazing feature'`
4. 推送分支：`git push origin feature/amazing-feature`
5. 提交Pull Request

### Bug报告
请使用Issue模板报告Bug，包含：
- 详细的复现步骤
- 预期行为和实际行为
- 浏览器版本和操作系统
- 错误截图（如有）

## 📄 License

MIT License - 详见 [LICENSE](LICENSE) 文件

---

**让技术服务于生活，让每一行代码都有温度！** 💪

*这不仅仅是一个插件，更是打工人的精神加油站！*
